## 浮动和清除浮动

W3school中给出的浮动 **定义** 为：

浮动的框可以向左或向右移动，直到它的外边缘碰到包含框或另一个浮动框的边框为止。由于浮动框 **脱离文档的普通流** 中，所以文档的普通流中的块框表现得就像浮动框不存在一样。

浮动的**特点**，可以用八个字总结：**脱标、贴边、字围和收缩。**

一个浮动的内联元素（比如span img标签）不需要设置display：block就可以设置宽度。

### 原理：

- 浮动元素脱离文档流，不占据空间（引起“高度塌陷”现象）；
- 浮动元素碰到包含它的边框或其他浮动元素的边框停留。

### 浮动带来的**问题**：

- 父级元素的高度将会无法被撑开，会影响与父级元素同级的元素
- 与浮动元素同级的非浮动元素（内联元素）会跟随其后
- 若浮动的元素不是第一个元素，则该元素之前的元素也要浮动，否则会影响页面的显示结构

在非IE浏览器下，当容器的高度为auto，且容器的内容中有浮动（float为left或right）的元素，在这种情况下，容器的高度不能自动伸长以适应内容的高度，使得内容溢出到容器外面而影响（甚至破坏）布局的现象。这个现象叫 **浮动溢出**，为了防止这个现象的出现而进行的CSS处理，就叫CSS **清除浮动**。

### **清除浮动方式**：

- 给浮动元素的父级盒子定义高度（扩展性不好）

- 最后一个浮动元素后面加一个`div`空标签，并且添加样式`clear: both` （页面多了无意义的冗余元素）

- **伪元素清除浮动（推荐）**

  上面那种办法固然可以清除浮动，但是我们不想在页面中添加这些没有意义的冗余元素，此时如何清除浮动吗？ **结合 :after 伪元素和 IEhack ，可以完美兼容当前主流的各大浏览器，这里的 IEhack 指的是触发 [hasLayout](https://www.cnblogs.com/linxuehan/p/3905207.html)**。

  ```css
  // 激发 haslayout
  .clearfix {
    zoom: 1;
  }
  // ie6 7 不支持伪元素 所以要激发 haslayout
  .clearfix:after {
    content: '';
    display: block;
    clear: both;
    width: 0;
    height: 0;
    line-height: 0;
    visibility: hidden; // 允许浏览器渲染它，但是不显示出来
  }
  ```

  给浮动元素的父容器添加一个clearfix的class，然后给这个class添加一个:after伪元素，实现元素末尾添加一个看不见的块元素来清理浮动。这是通用的清理浮动方案，**推荐使用**

- 包含浮动元素的父元素添加样式`overflow`为`hidden`;

  这种方案让父容器形成了**BFC（块级格式上下文）**，而BFC可以包含浮动，通常用来**解决浮动父元素高度坍塌的问题**。

  但这种办法有个**缺陷**：如果有内容出了盒子，用这种方法就会把多的部分裁切掉，所以这时候不能使用。

- 父级`div`定义`zoom`;

- br标签 （IE6不支持，违反了结构行为样式相分离的原则）

  br标签存在一个属性：clear。这个属性就是能够清除浮动的利器，在br标签中设置属性clear，并赋值all。即能清除掉浮动。